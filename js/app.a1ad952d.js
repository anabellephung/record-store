(function(e){function t(t){for(var n,s,a=t[0],i=t[1],l=t[2],u=0,b=[];u<a.length;u++)s=a[u],Object.prototype.hasOwnProperty.call(c,s)&&c[s]&&b.push(c[s][0]),c[s]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);d&&d(t);while(b.length)b.shift()();return o.push.apply(o,l||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,a=1;a<r.length;a++){var i=r[a];0!==c[i]&&(n=!1)}n&&(o.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},c={app:0},o=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/record-store/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],i=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var d=i;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23"),c={b:""};function o(e,t,r,o,s,a){var i=Object(n["w"])("Header"),l=Object(n["w"])("router-view");return Object(n["r"])(),Object(n["f"])("div",c,[Object(n["i"])(i),Object(n["i"])(l)])}var s={class:"bg-gray-200 py-4"},a={class:"container m-auto flex flex-wrap items-center justify-end"},i=Object(n["g"])("div",{class:"flex-1 flex items-center"},[Object(n["g"])("svg",{class:"fill-current text-indigo",viewBox:"0 0 24 24",width:"24",height:"24"},[Object(n["g"])("title",null,"record vinyl"),Object(n["g"])("path",{d:"M23.938 10.773a11.915 11.915 0 0 0-2.333-5.944 12.118 12.118 0 0 0-1.12-1.314A11.962 11.962 0 0 0 12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12c0-.414-.021-.823-.062-1.227zM12 16a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm0-5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"})]),Object(n["g"])("a",{href:"/",class:"uppercase text-sm font-mono pl-4 font-semibold no-underline text-indigo-700 hover:text-indigo-900"},"Record Store")],-1),l=Object(n["h"])("Sign in"),d=Object(n["h"])("Sign Up"),u=Object(n["h"])("Records"),b=Object(n["h"])("Artists");function p(e,t,r,c,o,p){var f=Object(n["w"])("router-link");return Object(n["r"])(),Object(n["f"])("header",s,[Object(n["g"])("div",a,[i,Object(n["g"])("div",null,[p.signedIn()?Object(n["e"])("",!0):(Object(n["r"])(),Object(n["d"])(f,{key:0,to:"/",class:"link-gray px-2 no-underline"},{default:Object(n["D"])((function(){return[l]})),_:1})),p.signedIn()?Object(n["e"])("",!0):(Object(n["r"])(),Object(n["d"])(f,{key:1,to:"/signup",class:"link-gray px-2 no-underline"},{default:Object(n["D"])((function(){return[d]})),_:1})),p.signedIn()?(Object(n["r"])(),Object(n["d"])(f,{key:2,to:"/records",class:"link-gray px-2 no-underline"},{default:Object(n["D"])((function(){return[u]})),_:1})):Object(n["e"])("",!0),p.signedIn()?(Object(n["r"])(),Object(n["d"])(f,{key:3,to:"/artists",class:"link-gray px-2 no-underline"},{default:Object(n["D"])((function(){return[b]})),_:1})):Object(n["e"])("",!0),p.signedIn()?(Object(n["r"])(),Object(n["f"])("a",{key:4,href:"#",onClick:t[0]||(t[0]=Object(n["F"])((function(){return p.signOut&&p.signOut.apply(p,arguments)}),["prevent"])),class:"link-gray px-2 no-underline"},"Sign out")):Object(n["e"])("",!0)])])])}r("ac1f"),r("5319");var f={name:"Header",created:function(){this.signedIn()},methods:{setError:function(e,t){this.error=e.response&&e.response.data&&e.response.data.error||t},signedIn:function(){return localStorage.signedIn},signOut:function(){var e=this;this.$http.secured.delete("/signin").then((function(t){return delete localStorage.csrf,delete localStorage.signedIn,e.$router.replace("/"),t})).catch((function(t){e.setError(t,"Cannot sign out")}))}}},g=r("6b0d"),j=r.n(g);const O=j()(f,[["render",p]]);var h=O,m={name:"App",components:{Header:h}};const v=j()(m,[["render",o]]);var y=v,w=r("6c02"),x={class:"max-w-sm m-auto my-8"},S={class:"border p-10 border-grey-light shadow rounded"},k=Object(n["g"])("h3",{class:"text-2xl mb-6 text-grey-darkest"},"Sign In",-1),A={key:0,class:"text-red-500"},E={class:"mb-6"},R=Object(n["g"])("label",{for:"email",class:"label"},"E-mail Address",-1),C={class:"mb-6"},I=Object(n["g"])("label",{for:"password",class:"label"},"Password",-1),_=Object(n["g"])("button",{type:"submit",class:"font-sans font-bold px-4 rounded cursor-pointer no-underline bg-green-700 hover:bg-green-800 block w-full py-4 text-white items-center justify-center"},"Sign In",-1),U={class:"my-4"},F=Object(n["h"])("Sign up");function $(e,t,r,c,o,s){var a=Object(n["w"])("router-link");return Object(n["r"])(),Object(n["f"])("div",x,[Object(n["g"])("div",S,[k,Object(n["g"])("form",{onSubmit:t[2]||(t[2]=Object(n["F"])((function(){return s.signin&&s.signin.apply(s,arguments)}),["prevent"]))},[o.error?(Object(n["r"])(),Object(n["f"])("div",A,Object(n["y"])(o.error),1)):Object(n["e"])("",!0),Object(n["g"])("div",E,[R,Object(n["E"])(Object(n["g"])("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.email=e}),class:"input",id:"email",placeholder:"anabelle@skyprep.com"},null,512),[[n["B"],o.email]])]),Object(n["g"])("div",C,[I,Object(n["E"])(Object(n["g"])("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.password=e}),class:"input",id:"password",placeholder:"Password"},null,512),[[n["B"],o.password]])]),_,Object(n["g"])("div",U,[Object(n["i"])(a,{to:"/signup",class:"link link-gray"},{default:Object(n["D"])((function(){return[F]})),_:1})])],32)])])}var V={name:"Signin",data:function(){return{email:"",password:"",error:""}},created:function(){this.checkSignedIn()},updated:function(){this.checkSignedIn()},methods:{signin:function(){var e=this;this.$http.plain.post("/signin",{email:this.email,password:this.password}).then((function(t){return e.signinSuccessful(t)})).catch((function(t){return e.signinFailed(t)}))},signinSuccessful:function(e){e.data.csrf?(localStorage.csrf=e.data.csrf,localStorage.signedIn=!0,this.error="",this.$router.replace("/records")):this.signinFailed(e)},signinFailed:function(e){this.error=e.response&&e.response.data&&e.response.data.error||"Something went wrong",delete localStorage.csrf,delete localStorage.signedIn},checkSignedIn:function(){localStorage.signedIn&&this.$router.replace("/records")}}};const B=j()(V,[["render",$]]);var P=B,T={class:"max-w-sm m-auto my-8"},z={class:"border p-10 border-grey-light shadow rounded"},M=Object(n["g"])("h3",{class:"text-2xl mb-6 text-grey-darkest"},"Sign Up",-1),D={key:0,class:"text-red-500"},L={class:"mb-6"},N=Object(n["g"])("label",{for:"email",class:"label"},"E-mail Address",-1),H={class:"mb-6"},K=Object(n["g"])("label",{for:"password",class:"label"},"Password",-1),X={class:"mb-6"},q=Object(n["g"])("label",{for:"password_confirmation",class:"label"},"Password Confirmation",-1),J=Object(n["g"])("button",{type:"submit",class:"font-sans font-bold px-4 rounded cursor-pointer no-underline bg-green-700 hover:bg-green-800 block w-full py-4 text-white items-center justify-center"},"Sign Up",-1),Y={class:"my-4"},G=Object(n["h"])("Sign In");function Q(e,t,r,c,o,s){var a=Object(n["w"])("router-link");return Object(n["r"])(),Object(n["f"])("div",T,[Object(n["g"])("div",z,[M,Object(n["g"])("form",{onSubmit:t[3]||(t[3]=Object(n["F"])((function(){return s.signup&&s.signup.apply(s,arguments)}),["prevent"]))},[o.error?(Object(n["r"])(),Object(n["f"])("div",D,Object(n["y"])(o.error),1)):Object(n["e"])("",!0),Object(n["g"])("div",L,[N,Object(n["E"])(Object(n["g"])("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.email=e}),class:"input",id:"email",placeholder:"anabelle@skyprep.com"},null,512),[[n["B"],o.email]])]),Object(n["g"])("div",H,[K,Object(n["E"])(Object(n["g"])("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.password=e}),class:"input",id:"password",placeholder:"Password"},null,512),[[n["B"],o.password]])]),Object(n["g"])("div",X,[q,Object(n["E"])(Object(n["g"])("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=function(e){return o.password_confirmation=e}),class:"input",id:"password_confirmation",placeholder:"Password Confirmation"},null,512),[[n["B"],o.password_confirmation]])]),J,Object(n["g"])("div",Y,[Object(n["i"])(a,{to:"/",class:"link link-gray"},{default:Object(n["D"])((function(){return[G]})),_:1})])],32)])])}var W={name:"Signup",data:function(){return{email:"",password:"",password_confirmation:"",error:""}},created:function(){this.checkedSignedIn()},updated:function(){this.checkedSignedIn()},methods:{signup:function(){var e=this;this.$http.plain.post("/signup",{email:this.email,password:this.password,password_confirmation:this.password_confirmation}).then((function(t){return e.signupSuccessful(t)})).catch((function(t){return e.signupFailed(t)}))},signupSuccessful:function(e){e.data.csrf?(localStorage.csrf=e.data.csrf,localStorage.signedIn=!0,this.error="",this.$router.replace("/records")):this.signupFailed(e)},signupFailed:function(e){this.error=e.response&&e.response.data&&e.response.data.error||"Something went wrong",delete localStorage.csrf,delete localStorage.signedIn},checkedSignedIn:function(){localStorage.signedIn&&this.$router.replace("/records")}}};const Z=j()(W,[["render",Q]]);var ee=Z,te=(r("b0c0"),{class:"max-w-md m-auto py-10"}),re={key:0,class:"text-red-500"},ne=Object(n["g"])("h3",{class:"font-mono font-regular text-3xl mb-4"},"Add a new record",-1),ce={class:"mb-6"},oe=Object(n["g"])("label",{for:"record_title",class:"label"},"Title",-1),se={class:"mb-6"},ae=Object(n["g"])("label",{for:"record_year",class:"label"},"Year",-1),ie={class:"mb-6"},le=Object(n["g"])("label",{for:"artist",class:"label"},"Artist",-1),de={class:"relative inline-block w-full text-gray-700"},ue=Object(n["g"])("option",{value:"",disabled:"",selected:""},"Select an artist",-1),be=["value"],pe=Object(n["g"])("div",{class:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none"},[Object(n["g"])("svg",{class:"w-4 h-4 fill-current",viewBox:"0 0 20 20"},[Object(n["g"])("path",{d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd","fill-rule":"evenodd"})])],-1),fe={class:"pt-4"},ge=Object(n["h"])("Don't see an artist? "),je=Object(n["h"])("Create one"),Oe=Object(n["g"])("input",{type:"submit",value:"Add Record",class:"font-sans font-bold px-4 rounded cursor-pointer no-underline bg-green-700 hover:bg-green-800 block w-full py-4 text-white items-center justify-center"},null,-1),he=Object(n["g"])("hr",{class:"border border-gray-100 my-6"},null,-1),me={class:"list-reset mt-4"},ve=["record"],ye={class:"flex items-center justify-between flex-wrap"},we={class:"flex-1 flex justify-between flex-wrap pr-4"},xe={class:"font-mono font-semibold flex items-center"},Se=Object(n["g"])("svg",{class:"fill-current text-indigo-400 w-6 h-6 mr-2",viewBox:"0 0 24 24",width:"24",height:"24"},[Object(n["g"])("title",null,"record vinyl"),Object(n["g"])("path",{d:"M23.938 10.773a11.915 11.915 0 0 0-2.333-5.944 12.118 12.118 0 0 0-1.12-1.314A11.962 11.962 0 0 0 12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12c0-.414-.021-.823-.062-1.227zM12 16a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm0-5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"})],-1),ke={class:"block font-mono font-semibold"},Ae=["onClick"],Ee=["onClick"],Re={key:0},Ce=["onSubmit"],Ie={class:"mb-6 p-4 bg-white rounded border border-gray-200 mt-4"},_e={class:"mb-6"},Ue=Object(n["g"])("label",{class:"label"},"Title",-1),Fe=["onUpdate:modelValue"],$e={class:"mb-6"},Ve=Object(n["g"])("label",{class:"label"},"Year",-1),Be=["onUpdate:modelValue"],Pe={class:"mb-6"},Te=Object(n["g"])("label",{class:"label"},"Artist",-1),ze={class:"relative inline-block w-full text-gray-700"},Me=["onUpdate:modelValue"],De=Object(n["g"])("option",{value:"",disabled:"",selected:""},"Select an artist",-1),Le=["value"],Ne=Object(n["g"])("div",{class:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none"},[Object(n["g"])("svg",{class:"w-4 h-4 fill-current",viewBox:"0 0 20 20"},[Object(n["g"])("path",{d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd","fill-rule":"evenodd"})])],-1),He=Object(n["g"])("input",{type:"submit",value:"Update",class:"bg-transparent text-sm hover:bg-blue-500 hover:text-white text-blue-500 border border-blue-500 no-underline font-bold py-2 px-4 mr-2 rounded"},null,-1);function Ke(e,t,r,c,o,s){var a=Object(n["w"])("router-link");return Object(n["r"])(),Object(n["f"])("div",te,[o.error?(Object(n["r"])(),Object(n["f"])("div",re,Object(n["y"])(o.error),1)):Object(n["e"])("",!0),ne,Object(n["g"])("form",{action:"",onSubmit:t[3]||(t[3]=Object(n["F"])((function(){return s.addRecord&&s.addRecord.apply(s,arguments)}),["prevent"]))},[Object(n["g"])("div",ce,[oe,Object(n["E"])(Object(n["g"])("input",{type:"text",id:"record_title",class:"input",autofocus:"",autocomplete:"off",placeholder:"Type a record name","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.newRecord.title=e})},null,512),[[n["B"],o.newRecord.title]])]),Object(n["g"])("div",se,[ae,Object(n["E"])(Object(n["g"])("input",{type:"text",id:"record_year",class:"input",autofocus:"",autocomplete:"off",placeholder:"Enter year of record","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.newRecord.year=e})},null,512),[[n["B"],o.newRecord.year]])]),Object(n["g"])("div",ie,[le,Object(n["g"])("div",de,[Object(n["E"])(Object(n["g"])("select",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.newRecord.artist=e}),id:"artist",class:"select",placeholder:"Select an artist"},[ue,(Object(n["r"])(!0),Object(n["f"])(n["a"],null,Object(n["v"])(o.artists,(function(e){return Object(n["r"])(),Object(n["f"])("option",{value:e.id,key:e.id},Object(n["y"])(e.name),9,be)})),128))],512),[[n["A"],o.newRecord.artist]]),pe]),Object(n["g"])("p",fe,[ge,Object(n["i"])(a,{class:"text-gray-700 underline",to:"/artists"},{default:Object(n["D"])((function(){return[je]})),_:1})])]),Oe],32),he,Object(n["g"])("ul",me,[(Object(n["r"])(!0),Object(n["f"])(n["a"],null,Object(n["v"])(o.records,(function(e){return Object(n["r"])(),Object(n["f"])("li",{class:"py-4",key:e.id,record:e},[Object(n["g"])("div",ye,[Object(n["g"])("div",we,[Object(n["g"])("p",xe,[Se,Object(n["h"])(" "+Object(n["y"])(e.title)+" â€” "+Object(n["y"])(e.year),1)]),Object(n["g"])("p",ke,Object(n["y"])(s.getArtist(e)),1)]),Object(n["g"])("button",{class:"bg-transparent text-sm hover:bg-blue-500 hover:text-white text-blue-500 border border-blue-500 no-underline font-bold py-2 px-4 mr-2 rounded",onClick:Object(n["F"])((function(t){return s.editRecord(e)}),["prevent"])},"Edit",8,Ae),Object(n["g"])("button",{class:"bg-transparent text-sm hover:bg-red-500 text-red-500 hover:text-white no-underline font-bold py-2 px-4 rounded border border-red-500",onClick:Object(n["F"])((function(t){return s.removeRecord(e)}),["prevent"])},"Delete",8,Ee)]),e==o.editedRecord?(Object(n["r"])(),Object(n["f"])("div",Re,[Object(n["g"])("form",{action:"",onSubmit:Object(n["F"])((function(t){return s.updateRecord(e)}),["prevent"])},[Object(n["g"])("div",Ie,[Object(n["g"])("div",_e,[Ue,Object(n["E"])(Object(n["g"])("input",{class:"input","onUpdate:modelValue":function(t){return e.title=t}},null,8,Fe),[[n["B"],e.title]])]),Object(n["g"])("div",$e,[Ve,Object(n["E"])(Object(n["g"])("input",{class:"input","onUpdate:modelValue":function(t){return e.year=t}},null,8,Be),[[n["B"],e.year]])]),Object(n["g"])("div",Pe,[Te,Object(n["g"])("div",ze,[Object(n["E"])(Object(n["g"])("select",{"onUpdate:modelValue":function(t){return e.artist=t},id:"artist",class:"select",placeholder:"Select an artist"},[De,(Object(n["r"])(!0),Object(n["f"])(n["a"],null,Object(n["v"])(o.artists,(function(e){return Object(n["r"])(),Object(n["f"])("option",{value:e.id,key:e.id},Object(n["y"])(e.name),9,Le)})),128))],8,Me),[[n["A"],e.artist]]),Ne])]),He])],40,Ce)])):Object(n["e"])("",!0)],8,ve)})),128))])])}r("4de4"),r("d3b7"),r("159b"),r("a434");var Xe={name:"Records",data:function(){return{artists:[],records:[],newRecord:[],error:"",editedRecord:""}},created:function(){var e=this;localStorage.signedIn?(this.$http.secured.get("/api/v1/records").then((function(t){e.records=t.data})).catch((function(t){return e.setError(t,"Something went wrong")})),this.$http.secured.get("/api/v1/artists").then((function(t){e.artists=t.data})).catch((function(t){return e.setError(t,"Something went wrong")}))):this.$router.replace("/")},methods:{setError:function(e,t){this.error=e.response&&e.response.data&&e.response.data.error||t},getArtist:function(e){var t,r=this.artists.filter((function(t){return t.id===e.artist_id}));return r.forEach((function(e){t=e.name})),t},addRecord:function(){var e=this,t=this.newRecord;t&&this.$http.secured.post("/api/v1/records/",{record:{title:this.newRecord.title,year:this.newRecord.year,artist_id:this.newRecord.artist}}).then((function(t){e.records.push(t.data),e.newRecord=""})).catch((function(t){return e.setError(t,"Cannot create record")}))},removeRecord:function(e){var t=this;this.$http.secured.delete("/api/v1/records/".concat(e.id)).then((function(r){return t.records.splice(t.records.indexOf(e),1),r})).catch((function(e){return t.setError(e,"Cannot delete record")}))},editRecord:function(e){this.editedRecord=e},updateRecord:function(e){var t=this;this.editedRecord="",this.$http.secured.patch("/api/v1/records/".concat(e.id),{record:{title:e.title,year:e.year,artist_id:e.artist}}).catch((function(e){return t.setError(e,"Cannot update record")}))}}};const qe=j()(Xe,[["render",Ke]]);var Je=qe,Ye={class:"max-w-md m-auto py-10"},Ge={key:0,class:"text-red-500"},Qe=Object(n["g"])("h3",{class:"font-mono font-regular text-3xl mb-4"},"Add a new artist",-1),We={class:"mb-6"},Ze=Object(n["g"])("input",{type:"submit",value:"Add Artist",class:"font-sans font-bold px-4 rounded cursor-pointer no-underline bg-green-700 hover:bg-green-800 block w-full py-4 text-white item-center justify-center"},null,-1),et=Object(n["g"])("hr",{class:"border border-gray-200 my-6"},null,-1),tt={class:"list-reset mt-4"},rt=["artist"],nt={class:"flex items-center justify-between flex-wrap"},ct={class:"flex-1 font-mono font-semibold flex items-center"},ot=Object(n["g"])("svg",{class:"fill-current text-indigo w-6 h-6 mr-2",viewBox:"0 0 20 20",width:"20",height:"20"},[Object(n["g"])("title",null,"music artist"),Object(n["g"])("path",{d:"M15.75 8l-3.74-3.75a3.99 3.99 0 0 1 6.82-3.08A4 4 0 0 1 15.75 8zm-13.9 7.3l9.2-9.19 2.83 2.83-9.2 9.2-2.82-2.84zm-1.4 2.83l2.11-2.12 1.42 1.42-2.12 2.12-1.42-1.42zM10 15l2-2v7h-2v-5z"})],-1),st=["onClick"],at=["onClick"],it={key:0},lt=["onSubmit"],dt={class:"mb-6 p-4 bg-white rounded border border-gray-200 mt-4"},ut=["onUpdate:modelValue"],bt=Object(n["g"])("input",{type:"submit",value:"Update",class:"my-2 bg-transparent text-sm hover:bg-blue-500 hover:text-white text-blue-500 border border-blue-500 no-underline font-bold py-2 px-4 rounded cursor-pointer"},null,-1);function pt(e,t,r,c,o,s){return Object(n["r"])(),Object(n["f"])("div",Ye,[o.error?(Object(n["r"])(),Object(n["f"])("div",Ge,Object(n["y"])(o.error),1)):Object(n["e"])("",!0),Qe,Object(n["g"])("form",{action:"",onSubmit:t[1]||(t[1]=Object(n["F"])((function(){return s.addArtist&&s.addArtist.apply(s,arguments)}),["prevent"]))},[Object(n["g"])("div",We,[Object(n["E"])(Object(n["g"])("input",{type:"text",class:"input",autofocus:"",autocomplete:"off",placeholder:"Type an artist name","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.newArtist.name=e})},null,512),[[n["B"],o.newArtist.name]])]),Ze],32),et,Object(n["g"])("ul",tt,[(Object(n["r"])(!0),Object(n["f"])(n["a"],null,Object(n["v"])(o.artists,(function(e){return Object(n["r"])(),Object(n["f"])("li",{key:e.id,artist:e,class:"py-4"},[Object(n["g"])("div",nt,[Object(n["g"])("p",ct,[ot,Object(n["h"])(" "+Object(n["y"])(e.name),1)]),Object(n["g"])("button",{class:"bg-transparent text-sm hover:bg-blue-500 hover:text-white text-blue-500 border border-blue-500 no-underline font-bold py-2 px-4 mr-2 rounded",onClick:Object(n["F"])((function(t){return s.editArtist(e)}),["prevent"])},"Edit",8,st),Object(n["g"])("button",{class:"bg-transparent text-sm hover:bg-red-500 hover:text-white text-red-500 border border-red-500 no-underline font-bold py-2 px-4 mr-2 rounded",onClick:Object(n["F"])((function(t){return s.removeArtist(e)}),["prevent"])},"Remove",8,at)]),e==o.editedArtist?(Object(n["r"])(),Object(n["f"])("div",it,[Object(n["g"])("form",{action:"",onSubmit:Object(n["F"])((function(t){return s.updateArtist(e)}),["prevent"])},[Object(n["g"])("div",dt,[Object(n["E"])(Object(n["g"])("input",{type:"text",class:"input","onUpdate:modelValue":function(t){return e.name=t}},null,8,ut),[[n["B"],e.name]]),bt])],40,lt)])):Object(n["e"])("",!0)],8,rt)})),128))])])}var ft={name:"Artists",data:function(){return{artists:[],newArtist:[],error:"",editedArtist:""}},created:function(){var e=this;localStorage.signedIn?this.$http.secured.get("/api/v1/artists").then((function(t){e.artists=t.data})).catch((function(t){return e.setError(t,"Something went wrong")})):this.$router.replace("/")},methods:{setError:function(e,t){this.error=e.response&&e.response.data&&e.response.data.error||t},addArtist:function(){var e=this,t=this.newArtist;t&&this.$http.secured.post("/api/v1/artists/",{artist:{name:this.newArtist.name}}).then((function(t){e.artists.push(t.data),e.newArtist=""})).catch((function(t){return e.setError(t,"Cannot create artist")}))},removeArtist:function(e){var t=this;this.$http.secured.delete("/api/v1/artists/".concat(e.id)).then((function(r){return t.artists.splice(t.artists.indexOf(e),1),r})).catch((function(e){return t.setError(e,"Cannot delete artist")}))},editArtist:function(e){this.editedArtist=e},updateArtist:function(e){var t=this;this.editedArtist="",this.$http.secured.patch("/api/v1/artists/".concat(e.id),{artist:{title:e.name}}).catch((function(e){return t.setError(e,"Cannot update artist")}))}}};const gt=j()(ft,[["render",pt]]);var jt=gt,Ot=[{path:"/artists",name:"Artists",component:jt},{path:"/records",name:"Records",component:Je},{path:"/",name:"Signin",component:P},{path:"/signup",name:"Signup",component:ee}],ht=Object(w["a"])({history:Object(w["b"])("/record-store/"),routes:Ot}),mt=ht,vt=r("130e"),yt=r("5530"),wt=r("bc3a"),xt=r.n(wt),St="http://localhost:3000",kt=xt.a.create({baseURL:St,withCredentials:!0,headers:{"Content-Type":"application/json"}}),At=xt.a.create({baseURL:St,withCredentials:!0,headers:{"Content-Type":"application/json"}});kt.interceptors.request.use((function(e){var t=e.method.toUpperCase();return"OPTIONS"!==t&&"GET"!==t&&(e.headers=Object(yt["a"])(Object(yt["a"])({},e.headers),{},{"X-CSRF-TOKEN":localStorage.csrf})),e})),kt.interceptors.response.use(null,(function(e){return e.response&&e.response.config&&401===e.response.status?At.post("/refresh",{},{headers:{"X-CSRF-TOKEN":localStorage.csrf}}).then((function(t){localStorage.csrf=t.data.csrf,localStorage.signedIn=!0;var r=e.response.config;return r.headers["X-CSRF-TOKEN"]=localStorage.csrf,At.request(r)})).catch((function(e){return delete localStorage.csrf,delete localStorage.signedIn,location.replace("/"),Promise.reject(e)})):Promise.reject(e)}));r("ba8c");var Et=Object(n["c"])(y);Et.use(mt).use(vt["a"],{secured:kt,plain:At}),Et.mount("#app")},ba8c:function(e,t,r){}});
//# sourceMappingURL=app.a1ad952d.js.map